(this.webpackJsonpgiffy=this.webpackJsonpgiffy||[]).push([[0],[,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var c="4j3Gn8Ef6wRe5OnS4RV0RXVMAXdtV8aM",r="https://api.giphy.com/v1"},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(8),a=n.n(i),s=n(3),o=n(2),u=n(6),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keyword,n=e.mode,c=e.page,r=void 0===c?0:c,i=e.limit,a=void 0===i?25:i,s=null;return"trending"===n?s="".concat(u.b,"/gifs/").concat(n,"?api_key=").concat(u.a,"&limit=").concat(a,"&offset=").concat(r*a,"&rating=r&lang=en"):"search"===n&&(s="".concat(u.b,"/gifs/").concat(n,"?api_key=").concat(u.a,"&q=").concat(t,"&limit=").concat(a,"&offset=").concat(r*a,"&rating=r&lang=en")),fetch(s).then((function(e){return e.json()})).then((function(e){return e.data.map((function(e){return{title:e.title,id:e.id,url:e.images.downsized_medium.url}}))}))},d=n(0),f=r.a.createContext({});function l(e){var t=e.children,n=Object(c.useState)([]),r=Object(o.a)(n,2),i=r[0],a=r[1];return Object(d.jsx)(f.Provider,{value:{gifs:i,setGifs:a},children:t})}var b=f,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:null},t=e.keyword,n=arguments.length>1?arguments[1]:void 0,r=Object(c.useState)(!1),i=Object(o.a)(r,2),a=i[0],s=i[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),f=d[0],l=d[1],O=Object(c.useState)(0),g=Object(o.a)(O,2),h=g[0],x=g[1],m=Object(c.useContext)(b),v=m.gifs,p=m.setGifs,y=t||localStorage.getItem("lastKeyword"),k=n||"trending";return Object(c.useEffect)((function(){s(!0),j({keyword:y,mode:k}).then((function(e){p(e),s(!1),localStorage.setItem("lastKeyword",t)}))}),[t,y,k,p]),Object(c.useEffect)((function(){0!==h&&(l(!0),j({keyword:y,mode:k,page:h}).then((function(e){p((function(t){return t.concat(e)})),l(!1)})))}),[h,y,k,p]),{loading:a,loadingNextPage:f,gifs:v,setPage:x}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.distance,n=void 0===t?"100px":t,r=e.externalRef,i=e.once,a=void 0===i||i,s=Object(c.useState)(!1),u=Object(o.a)(s,2),j=u[0],d=u[1],f=Object(c.useRef)();return Object(c.useEffect)((function(){var e=r?r.current:f.current,t=new IntersectionObserver((function(e,t){e[0].isIntersecting?(d(!0),a&&t.disconnect()):!a&&d(!1)}),{rootMargin:n});return e&&t.observe(e),function(){return t.disconnect()}}),[f,r,n,a]),{isNearScreen:j,fromRef:f}},h=n(10),x=(n(17),function(e){var t=e.title,n=e.id,c=e.url;return Object(d.jsx)(s.a,{to:"/gif/".concat(n),className:"Gif",children:Object(d.jsxs)("figure",{children:[Object(d.jsx)("img",{src:c,alt:"giff"}),Object(d.jsx)("figcaption",{children:t})]})})}),m=function(e){var t=e.gifs;return Object(d.jsx)(h.a,{breakpointCols:{default:4,1500:3,1e3:2,700:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:t.map((function(e){var t=e.id,n=e.title,c=e.url;return Object(d.jsx)(x,{id:t,title:n,url:c},t)}))})},v=(n(18),function(){return Object(d.jsx)("div",{className:"spinner"})}),p=n(9),y=n.n(p),k=function(e){var t=e.keyword,n=e.mode,r=O({keyword:t},n),i=r.loading,a=r.gifs,s=r.setPage,o=Object(c.useRef)(),u=g({externalRef:i?null:o,once:!1}).isNearScreen,j=Object(c.useCallback)(y()((function(){return s((function(e){return e+1}))}),300),[]);return Object(c.useEffect)((function(){u&&j()}),[u,j]),Object(d.jsx)("div",{className:"container",children:i?Object(d.jsx)(v,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:decodeURI(t)}),Object(d.jsx)(m,{gifs:a}),Object(d.jsx)("div",{id:"visor",ref:o})]})})},w=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(s.c)(),a=Object(o.a)(i,2),u=(a[0],a[1]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.length>0&&u("/search/".concat(n))},children:[Object(d.jsx)("input",{onChange:function(e){r(e.target.value)},type:"text",value:n,placeholder:"Search gifs here..."}),Object(d.jsx)("button",{id:"search-button",className:"button",children:"Search"})]})})},S=(n(19),function(){return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("header",{children:Object(d.jsxs)(s.a,{to:"/",children:[Object(d.jsx)("h1",{children:"GiFox"}),Object(d.jsx)("img",{className:"gifox-logo",src:"/gifox-logo.svg",alt:"logo"})]})}),Object(d.jsx)(w,{})]})}),N=r.a.lazy((function(){return n.e(3).then(n.bind(null,25))})),C=function(){var e=g({distance:"200px"}),t=e.isNearScreen,n=e.fromRef;return Object(d.jsx)("div",{ref:n,children:t?Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)(v,{}),children:Object(d.jsx)(N,{})}):Object(d.jsx)(v,{})})},R=(n(20),function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(S,{}),Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)(k,{keyword:"trending",mode:"trending"}),Object(d.jsx)(C,{})]})]})}),F=n(11),I=function(){return Object(c.useContext)(b).gifs},E=function(e){var t=e.params,n=I().find((function(e){return e.id===t.id}));return Object(d.jsx)("div",{id:"detail",children:Object(d.jsx)(x,Object(F.a)({},n))})},P=function(e){var t=e.params.keyword;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(S,{}),Object(d.jsx)(k,{keyword:t,mode:"search"})]})};n(21);var G=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)("section",{className:"App-content",children:Object(d.jsxs)(l,{children:[Object(d.jsx)(s.b,{path:"/",component:R}),Object(d.jsx)(s.b,{path:"/search/:keyword",component:P}),Object(d.jsx)(s.b,{path:"/gif/:id",component:E})]})})})},M=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,24)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(G,{})}),document.getElementById("root")),M()}],[[22,1,2]]]);
//# sourceMappingURL=main.eb25f036.chunk.js.map